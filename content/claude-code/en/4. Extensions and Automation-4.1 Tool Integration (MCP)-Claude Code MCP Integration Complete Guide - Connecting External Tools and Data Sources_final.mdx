---
title: "Claude Code MCP Integration Complete Guide: Connecting External Tools and Data Sources"
description: "Learn how to use Model Context Protocol to connect Claude Code to external tools, including GitHub, Sentry, databases, and API integrations for common services."
date: "2026-02-10"
tool: "Claude Code"
slug: "connect-external-tools"
---

import AdPlaceholder from '@/components/AdPlaceholder'

# Claude Code MCP Integration Complete Guide: Connecting External Tools and Data Sources

Model Context Protocol (MCP) is an open standard that allows Claude Code to safely connect to hundreds of external tools, data sources, and APIs. Through MCP integration, you can ask Claude to directly interact with systems like JIRA, GitHub, databases, etc., dramatically enhancing automation capabilities.

<AdPlaceholder />

## Prerequisites

Before learning about MCP integration, make sure you have the following:

- **Claude Code**: Installed and working Claude Code
- **Command Line Basics**: Familiar with terminal operations
- **API Keys**: Access credentials for services you want to integrate
- **Security Awareness**: Understand OAuth and API security basics

## Step 1: Understand MCP

### Step 1.1: What is MCP

MCP (Model Context Protocol) is an open standard for connecting AI assistants to external tools:

- **Standardized protocol**: Unified way to connect to various tools
- **Secure connections**: Supports OAuth authentication
- **Dynamic tools**: Tools auto-update, no need to reconfigure

<ProTip>
MCP lets Claude access your entire tool ecosystem, enabling true automation workflows.
</ProTip>

### Step 1.2: What MCP Can Do

After connecting an MCP server, you can:

| Feature | Example |
|---------|---------|
| **Project Management** | "Add the feature described in JIRA issue ENG-4521" |
| **Data Analysis** | "Check Sentry for errors in the last 24 hours" |
| **Database Queries** | "Query PostgreSQL database to find active users" |
| **Design Integration** | "Update email template based on Figma design" |
| **Automation Workflows** | "Create email draft to invite users to test" |

### Step 1.3: Available MCP Server Types

Claude Code supports multiple types of MCP servers:

| Server Type | Example | Use Case |
|-------------|---------|----------|
| HTTP Server | GitHub, Sentry | Cloud service integration |
| SSE Server | Asana (legacy) | Real-time push |
| Stdio Server | File system, database | Local tools |

## Step 2: Install MCP Servers

### Step 2.1: HTTP Server Installation (Recommended)

HTTP servers are the recommended way to connect to remote MCP services:

```bash
# Basic syntax
claude mcp add --transport http <name> <url>

# Real example: Connect to Notion
claude mcp add --transport http notion https://mcp.notion.com/mcp

# Example with Bearer token
claude mcp add --transport http secure-api https://api.example.com/mcp \
  --header "Authorization: Bearer your-token"
```

<ProTip>
HTTP servers are the best choice for cloud services, supporting automatic reconnection and load balancing.
</ProTip>

### Step 2.2: Stdio Server Installation

Stdio servers run as local processes:

```bash
# Basic syntax
claude mcp add [options] <name> -- <command> [args...]

# Real example: Add Airtable server
claude mcp add --transport stdio db -- npx -y @bytebase/dbhub \
  -- AIRTABLE_API_KEY=YOUR_KEY
```

<Note>
**Important**: All options must come before the server name, `--` is used to separate MCP options from server parameters.
</Note>

### Step 2.3: Windows Special Configuration

Windows users need to be aware:

```bash
# Need cmd /c wrapper when using npx
claude mcp add --transport stdio my-server -- cmd /c npx -y @some/package
```

<Warning>
Windows users will encounter "Connection closed" errors without the `cmd /c` wrapper.
</Warning>

## Step 3: Manage MCP Servers

### Step 3.1: Basic Management Commands

```bash
# List all configured servers
claude mcp list

# Get details for a specific server
claude mcp get github

# Remove a server
claude mcp remove github

# Check server status in Claude Code
/mcp
```

### Step 3.2: Dynamic Tool Updates

Claude Code supports MCP's `list_changed` notifications:
- Automatically refreshes tools when server sends notification
- No need to disconnect and reconnect
- Tool set automatically updates

### Step 3.3: Timeout and Output Limits

```bash
# Configure server startup timeout (milliseconds)
MCP_TIMEOUT=10000 claude

# Configure maximum output tokens
MAX_MCP_OUTPUT_TOKENS=50000 claude
```

<ProTip>
For servers that produce large output (like database queries), increasing the output limit is necessary.
</ProTip>

## Step 4: Configure Scope

### Step 4.1: Understand Scope Types

MCP servers can be configured in three scopes:

| Scope | Command | Storage Location | Shared With |
|--------|---------|-------------------|---------------|
| **Local** | Default | `~/.claude.json` | You only |
| **Project** | `--scope project` | `.mcp.json` | Team |
| **User** | `--scope user` | `~/.claude.json` | You across projects |

### Step 4.2: Local Scope Configuration

Local scope is the default configuration:

```bash
# Add local scope server (default)
claude mcp add --transport http stripe https://mcp.stripe.com

# Explicitly specify
claude mcp add --transport http stripe --scope local https://mcp.stripe.com
```

<ProTip>
Local scope is suitable for personal development servers and experimental configurations.
</ProTip>

### Step 4.3: Project Scope Configuration

Project scope enables team collaboration via `.mcp.json` file:

```bash
# Add project scope server
claude mcp add --transport http paypal --scope project https://mcp.paypal.com/mcp
```

**Generated `.mcp.json` format:**
```json
{
  "mcpServers": {
    "shared-server": {
      "command": "/path/to/server",
      "args": [],
      "env": {}
    }
  }
}
```

<Note>
For security reasons, Claude Code prompts for approval before using project scope servers.
</Note>

### Step 4.4: User Scope Configuration

User scope provides accessibility across projects:

```bash
# Add user server
claude mcp add --transport http hubspot --scope user https://mcp.hubspot.com/anthropic
```

### Step 4.5: Priority Rules

When servers with the same name exist in multiple scopes:

1. **Local scope** (highest priority)
2. **Project scope**
3. **User scope** (lowest priority)

<ProTip>
Personal configurations can override shared configurations when needed.
</ProTip>

## Step 5: Real-World Usage Examples

### Step 5.1: Connect to GitHub

```bash
# 1. Add GitHub MCP server
claude mcp add --transport http github https://api.githubcopilot.com/mcp/

# 2. If authentication is needed, use in Claude Code
> /mcp
# Select GitHub for authentication

# 3. Usage examples
> "Review PR #456 and suggest improvements"
> "Create a new issue for bug"
> "Show me all open PRs assigned to me"
```

### Step 5.2: Connect to Sentry Monitoring

```bash
# 1. Add Sentry MCP server
claude mcp add --transport http sentry https://mcp.sentry.dev/mcp

# 2. Use /mcp for authentication
> /mcp

# 3. Debug production issues
> "What are the most common errors in the last 24 hours?"
> "Show me the stack trace for error ID abc123"
> "Which deployment introduced these new errors?"
```

### Step 5.3: Connect to PostgreSQL Database

```bash
# 1. Add database server using connection string
claude mcp add --transport stdio db -- npx -y @bytebase/dbhub \
  --dsn "postgresql://readonly:pass@prod.db.com:5432/analytics"

# 2. Natural language queries
> "What's our total revenue this month?"
> "Show me the schema for the orders table"
> "Find customers who haven't made a purchase in 90 days"
```

### Step 5.4: Connect to Slack Notifications

```bash
# Add Slack MCP server
claude mcp add --transport http slack https://mcp.slack.com/mcp

# Send notifications
> "Send a channel message to #engineering about deployment"
> "Create a thread in the production-incidents channel"
```

## Step 6: Use MCP Resources

### Step 6.1: Reference MCP Resources

MCP servers can expose resources, which you reference using the `@` syntax:

```bash
# View available resources
> @

# Reference specific resource
> "Can you analyze @github:issue://123 and suggest a fix?"
> "Please review the API documentation at @docs:file://api/authentication"
```

### Step 6.2: Multi-Resource References

```bash
# Compare multiple resources
> "Compare @postgres:schema://users with @docs:file://database/user-model"
```

<ProTip>
Resource references let Claude access any type of content provided by MCP servers.
</ProTip>

## Step 7: Use MCP Prompts

### Step 7.1: Execute MCP Prompts

MCP servers can expose prompts as slash commands:

```bash
# Discover available prompts
> /

# Execute prompt without arguments
> /mcp__github__list_prs

# Execute prompt with arguments
> /mcp__github__pr_review 456
> /mcp__jira__create_issue "Bug in login flow" high
```

### Step 7.2: Prompt Format

MCP prompt format is:
```
/mcp__servername__promptname [arguments]
```

## Step 8: OAuth Authentication

### Step 8.1: Authentication Flow

Many cloud services require OAuth authentication:

```bash
# 1. Add server that requires authentication
claude mcp add --transport http sentry https://mcp.sentry.dev/mcp

# 2. Start authentication in Claude Code
> /mcp

# 3. Follow the steps in your browser to complete login
```

### Step 8.2: Manage Authentication

- Authentication tokens are automatically and securely stored
- Expired tokens are automatically refreshed
- Use "Clear authentication" in `/mcp` to revoke access

## Step 9: Import from Other Configurations

### Step 9.1: Add from JSON Configuration

```bash
# Basic syntax
claude mcp add-json <name> '<json>'

# HTTP server example
claude mcp add-json weather-api '{"type":"http","url":"https://api.weather.com/mcp","headers":{"Authorization":"Bearer token"}}'

# Stdio server example
claude mcp add-json local-weather '{"type":"stdio","command":"/path/to/weather-cli","args":["--api-key","abc123"],"env":{"CACHE_DIR":"/tmp"}}'
```

### Step 9.2: Import from Claude Desktop

```bash
# Import all Claude Desktop servers
claude mcp add-from-claude-desktop

# Select which servers to import
# Imported servers will get numeric suffix if duplicates exist
```

<Note>
This feature is only available on macOS and WSL.
</Note>

## Step 10: Use Claude Code as MCP Server

### Step 10.1: Start MCP Service

```bash
# Start Claude as stdio MCP server
claude mcp serve
```

### Step 10.2: Configure in Claude Desktop

```json
{
  "mcpServers": {
    "claude-code": {
      "type": "stdio",
      "command": "claude",
      "args": ["mcp", "serve"],
      "env": {}
    }
  }
}
```

<Warning>
Ensure the `command` field uses the full path, as `claude` might not be in PATH.
</Warning>

```bash
# Find full path
which claude
```

## Pro Tips

### Tip 1: Choose the Right Scope

| Need | Recommended Scope |
|-------|------------------|
| Personal development server | Local |
| Team-shared tool | Project |
| Cross-project utility | User |

<ProTip>
Choosing the right scope avoids configuration confusion while maintaining necessary flexibility.
</ProTip>

### Tip 2: Manage MCP Access Securely

- **Sensitive data**: Use local scope to avoid leaks
- **Team tools**: Use project scope to share
- **API keys**: Use environment variables instead of hardcoding

### Tip 3: Performance Optimization

```bash
# Increase output limit (for large queries)
MAX_MCP_OUTPUT_TOKENS=50000 claude

# Set timeout
MCP_TIMEOUT=30000 claude
```

### Tip 4: Troubleshooting

| Problem | Solution |
|---------|----------|
| Connection timeout | Increase `MCP_TIMEOUT` |
| Output too large | Increase `MAX_MCP_OUTPUT_TOKENS` |
| Authentication fails | Use `/mcp` to re-authenticate |
| Tools not available | Run `claude mcp list` to check status |

## Common Troubleshooting

### Problem 1: Server Cannot Connect

**Solutions:**
1. Check if server URL is correct
2. Verify network connection
3. Confirm authentication token is valid
4. View error messages for details

### Problem 2: Authentication Fails

**Solutions:**
1. Use `/mcp` to restart authentication flow
2. Clear old authentication and retry
3. Check if OAuth configuration is correct

### Problem 3: Tools Not Showing

**Solutions:**
1. Run `claude mcp list` to confirm server is added
2. Restart Claude Code session
3. Check if server sent `list_changed` notification

### Problem 4: Permission Denied

**Solutions:**
1. Check scope configuration
2. Confirm server is not blocked by managed policy
3. Verify API key permissions

## Conclusion

Through MCP integration, Claude Code can connect to almost any external tool or service. By learning from this guide, you have mastered:

- ✅ MCP basic concepts and advantages
- ✅ Installing and configuring various types of MCP servers
- ✅ Managing MCP server scopes and permissions
- ✅ Using MCP in real workflows
- ✅ Using MCP resources and prompts
- ✅ OAuth authentication management

<ProTip>
MCP is a powerful way to extend Claude Code capabilities. Use it appropriately to dramatically improve development efficiency.
</ProTip>

<AdPlaceholder />
